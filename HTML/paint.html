<!DOCTYPE html>
<html>
  <style>
    #myCanvas {
      border: 1px dotted blueviolet;
    }
  </style>
  <body>
    <label for="bgColor">배경 색상:</label>
    <select id="bgColor">
      <option value="white">흰색</option>
      <option value="black">검정</option>
    </select>
    <br />

    <label for="penColor">펜 색상:</label>
    <input type="color" id="penColor" value="#000000" />
    <br />

    <label for="penWidth">펜 굵기:</label>
    <input type="range" id="penWidth" min="1" max="10" value="1" />
    <br />

    <button onclick="clearCanvas();">화면 지우기</button>
    <br />
    <canvas id="myCanvas" width="600" height="400"></canvas>

    <script>
      let canvas = document.getElementById("myCanvas");
      let context = canvas.getContext("2d");
      let bgColor = document.getElementById("bgColor");
      let penColor = document.getElementById("penColor");
      let penWidth = document.getElementById("penWidth");

      let last_x = 0,
        last_y = 0;
      let draw_mode = false;

      bgColor.addEventListener("change", function () {
        canvas.style.backgroundColor = bgColor.value;
      });

      function clearCanvas() {
        context.clearRect(0, 0, canvas.width, canvas.height);
      }

      canvas.addEventListener("mousemove", function (event) {
        if (!draw_mode) return;
        let x = event.offsetX;
        let y = event.offsetY;
        context.strokeStyle = penColor.value;
        context.lineWidth = penWidth.value;
        context.lineTo(x, y);
        context.stroke();
        last_x = x;
        last_y = y;
      });

      canvas.addEventListener("mousedown", function (event) {
        last_x = event.offsetX;
        last_y = event.offsetY;
        context.beginPath();
        context.moveTo(last_x, last_y);
        draw_mode = true;
      });

      canvas.addEventListener("mouseup", function (event) {
        draw_mode = false;
      });

      canvas.addEventListener("mouseout", function (event) {
        draw_mode = false;
      });
    </script>
  </body>
</html>
